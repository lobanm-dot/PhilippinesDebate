<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philippines Annexation Forum</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom animations usually handled by Tailwind config in build tools */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out; }
        
        /* Smooth transition for the meter width */
        #meter-fill { transition: all 0.7s ease-out; }
    </style>
</head>
<body class="bg-amber-50 text-slate-900 font-sans selection:bg-amber-200 min-h-screen">

    <!-- Header / Meter Section (Hidden on Intro) -->
    <div id="header-section" class="hidden sticky top-0 z-10 bg-slate-900 text-amber-50 p-4 shadow-lg border-b-4 border-amber-600">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-end mb-2">
                <span class="text-sm font-bold uppercase tracking-widest text-red-300">Total Independence</span>
                <h1 class="text-xl font-serif font-bold text-center hidden md:block">Public Sentiment Meter</h1>
                <span class="text-sm font-bold uppercase tracking-widest text-blue-300">Total Annexation</span>
            </div>
            
            <!-- Meter Container -->
            <div class="relative h-6 bg-slate-700 rounded-full overflow-hidden border border-slate-600">
                <!-- Center Line Marker -->
                <div class="absolute left-1/2 top-0 bottom-0 w-0.5 bg-white z-10 opacity-50"></div>
                
                <!-- Fill Bar -->
                <div id="meter-fill" class="absolute top-0 bottom-0 bg-slate-500"></div>
            </div>
            <div id="meter-text" class="text-center text-xs mt-1 text-slate-400 font-mono">
                Current Attitude: Neutral
            </div>
        </div>
    </div>

    <main id="app" class="max-w-4xl mx-auto p-6">
        <!-- Content will be injected here by JavaScript -->
    </main>

    <script>
        // --- DATA ---
        const DEBATE_DATA = [
            {
                id: 1,
                name: "William McKinley",
                role: "President of the United States",
                stance: "imperialist",
                quote: "We could not leave them to themselves—they were unfit for self-government—and they would soon have anarchy and misrule over there worse than Spain's was. There was nothing left for us to do but to take them all, and to educate the Filipinos, and uplift and civilize and Christianize them.",
                link: "https://www.whitehouse.gov/about-the-white-house/presidents/william-mckinley/",
                source: "Remarks to Methodist Delegation, 1899"
            },
            {
                id: 2,
                name: "Mark Twain",
                role: "Author & Activist",
                stance: "anti-imperialist",
                quote: "I have seen that we do not intend to free, but to subjugate the people of the Philippines. We have gone there to conquer, not to redeem. And so I am an anti-imperialist. I am opposed to having the eagle put its talons on any other land.",
                link: "https://marktwainhouse.org/about/mark-twain/biography/",
                source: "New York Herald, 1900"
            },
            {
                id: 3,
                name: "Albert Beveridge",
                role: "U.S. Senator (Indiana)",
                stance: "imperialist",
                quote: "The Philippines are ours forever... And just beyond the Philippines are China's illimitable markets. We will not retreat from either. The power that rules the Pacific is the power that rules the world.",
                link: "https://bioguide.congress.gov/search/bio/B000429",
                source: "The March of the Flag, 1898"
            },
            {
                id: 4,
                name: "Jane Addams",
                role: "Social Reformer & Activist",
                stance: "anti-imperialist",
                quote: "To 'protect the weak' has always been the excuse of the ruler and tax-gatherer, the chief, the king, the baron; and now, at last, of 'the white man'. Peace is not merely an absence of war, it is the nurture of human life.",
                link: "https://www.nobelprize.org/prizes/peace/1931/addams/biographical/",
                source: "Democracy or Militarism, 1899"
            },
            {
                id: 5,
                name: "Alfred Thayer Mahan",
                role: "Naval Strategist",
                stance: "imperialist",
                quote: "It is essential to the welfare of the whole country that the conditions of trade and commerce should remain unaffected by external war. To do this, we need naval stations in those distant parts of the world. The Philippines give us a base at the door of all the East.",
                link: "https://history.state.gov/milestones/1866-1898/mahan",
                source: "The Influence of Sea Power Upon History"
            },
            {
                id: 6,
                name: "Andrew Carnegie",
                role: "Industrialist",
                stance: "anti-imperialist",
                quote: "Is the Republic to remain one homogeneous whole, one united people, or to become a scattered and disjointed aggregate of widely separated and alien races? We will be forced to govern them as generously as Britain governs her dependencies, which means they will yield us nothing.",
                link: "https://www.carnegie.org/about/our-history/andrew-carnegie/",
                source: "Distant Possessions: The Parting of the Ways, 1898"
            },
            {
                id: 7,
                name: "Theodore Roosevelt",
                role: "Assistant Secretary of the Navy / VP",
                stance: "imperialist",
                quote: "I preach to you, then, my countrymen, that our country calls not for the life of ease but for the life of strenuous endeavor. If we stand idly by... then the bolder and stronger peoples will pass us by, and will win for themselves the domination of the world.",
                link: "https://www.whitehouse.gov/about-the-white-house/presidents/theodore-roosevelt/",
                source: "The Strenuous Life, 1899"
            },
            {
                id: 8,
                name: "Carl Schurz",
                role: "Former Senator & Secretary of the Interior",
                stance: "anti-imperialist",
                quote: "This means government without the consent of the governed. It means taxation without representation. The American flag, we are told, must never be hauled down. But woe to the republic if it should ever be without citizens brave enough to defy the demagogue's cry.",
                link: "https://bio.guide/congress/member/S000151",
                source: "Against American Imperialism, 1899"
            },
            {
                id: 9,
                name: "Henry Cabot Lodge",
                role: "U.S. Senator (Massachusetts)",
                stance: "imperialist",
                quote: "Manila, with its magnificent bay, is the prize and the pearl of the East. In the Philippines we have brought peace... Anarchy is simply the hand-maiden and forerunner of tyranny and despotism. We have done our duty to ourselves and the civilization of mankind.",
                link: "https://www.senate.gov/artandhistory/history/common/generic/People_Leaders_Lodge_Henry_Cabot.htm",
                source: "Senate Speech, 1900"
            },
            {
                id: 10,
                name: "William Jennings Bryan",
                role: "Democratic Presidential Nominee",
                stance: "anti-imperialist",
                quote: "When the white man governs himself, that is self-government; but when he governs himself and also governs another man, that is more than self-government—that is despotism. We dare not educate them, lest they learn to read the Declaration of Independence and mock us.",
                link: "https://www.loc.gov/item/today-in-history/march-19/",
                source: "Imperialism Speech, 1900"
            },
            {
                id: 11,
                name: "John Hay",
                role: "Secretary of State",
                stance: "imperialist",
                quote: "The war has been a splendid little war; begun with the highest motives, carried on with magnificent intelligence and spirit, favored by that Fortune which loves the brave. We must not let the opportunity pass to secure our place in the global order.",
                link: "https://history.state.gov/departmenthistory/people/hay-john-milton",
                source: "Letter to Theodore Roosevelt, 1898"
            },
            {
                id: 12,
                name: "George Frisbie Hoar",
                role: "U.S. Senator (Massachusetts)",
                stance: "anti-imperialist",
                quote: "You have sacrificed nearly ten thousand American lives... You have slain uncounted thousands of the people you desire to benefit. You have established reconcentration camps. You have made the American flag in the eyes of a numerous people the emblem of sacrilege.",
                link: "https://www.massmoments.org/moment-details/senator-hoar-speaks-against-imperialism.html",
                source: "Subjugation of the Philippines Iniquitous, 1902"
            }
        ];

        // --- STATE ---
        let state = {
            step: 'intro', // intro, forum, conclusion
            currentSpeakerIndex: 0,
            meterValue: 0, // -50 to 50
            finalVote: null,
            justification: ''
        };

        // --- RENDER FUNCTIONS ---

        function updateMeter() {
            const header = document.getElementById('header-section');
            if (state.step === 'intro') {
                header.classList.add('hidden');
                return;
            }
            header.classList.remove('hidden');

            const fill = document.getElementById('meter-fill');
            const text = document.getElementById('meter-text');

            // Logic: 0 -> 50%, -50 -> 0%, +50 -> 100%
            const percentage = Math.min(100, Math.max(0, state.meterValue + 50));
            
            // Positioning logic
            if (state.meterValue >= 0) {
                fill.style.left = '50%';
                fill.style.width = state.meterValue + '%';
                fill.className = 'absolute top-0 bottom-0 transition-all duration-700 ease-out bg-blue-600';
            } else {
                fill.style.left = percentage + '%';
                fill.style.width = Math.abs(state.meterValue) + '%';
                fill.className = 'absolute top-0 bottom-0 transition-all duration-700 ease-out bg-red-600';
            }
            
            if (state.meterValue === 0) {
                 fill.className = 'absolute top-0 bottom-0 transition-all duration-700 ease-out bg-slate-500';
                 fill.style.width = '0%';
            }

            // Text
            let status = 'Neutral';
            if (state.meterValue > 0) status = `+${state.meterValue} (Pro-Annexation)`;
            if (state.meterValue < 0) status = `${state.meterValue} (Pro-Independence)`;
            text.innerText = `Current Attitude: ${status}`;
        }

        function renderIntro() {
            return `
            <div class="flex flex-col items-center justify-center min-h-[80vh] text-center space-y-8 animate-fade-in">
                <div class="bg-white p-12 rounded-lg shadow-xl border-t-8 border-slate-900 max-w-2xl">
                    <i data-lucide="scale" class="w-16 h-16 mx-auto text-slate-800 mb-6"></i>
                    <h1 class="text-4xl md:text-5xl font-serif font-bold text-slate-900 mb-4">The Philippines Question</h1>
                    <p class="text-lg text-slate-600 mb-8 italic font-serif">
                        "1898. The Spanish-American War has ended. The Treaty of Paris hangs in the balance. 
                        Should the United States annex the Philippines, or grant them independence?"
                    </p>
                    <div class="text-left bg-amber-100 p-6 rounded-md border border-amber-200 mb-8 text-sm md:text-base">
                        <p class="mb-2"><strong>Instructions:</strong></p>
                        <ul class="list-disc pl-5 space-y-2 text-slate-800">
                            <li>You will hear from 12 historical figures.</li>
                            <li>Some want to <strong>Annex</strong> the territory.</li>
                            <li>Others want <strong>Independence</strong> for the Philippines.</li>
                            <li>Rate how convincing you find each argument.</li>
                            <li>Your choices will sway the Sentiment Meter.</li>
                            <li>At the end, cast your final vote.</li>
                        </ul>
                    </div>
                    <button onclick="startForum()" class="bg-slate-900 hover:bg-slate-800 text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg transition-transform transform hover:scale-105 flex items-center gap-3 mx-auto">
                        Enter the Forum <i data-lucide="arrow-right" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>
            `;
        }

        function renderForum() {
            const speaker = DEBATE_DATA[state.currentSpeakerIndex];
            const remaining = DEBATE_DATA.length - state.currentSpeakerIndex - 1;

            return `
            <div class="animate-fade-in-up">
                <!-- Progress Counter -->
                <div class="flex justify-between items-center mb-6 text-slate-500 text-sm font-bold uppercase tracking-wider">
                    <span>Speaker ${state.currentSpeakerIndex + 1} of ${DEBATE_DATA.length}</span>
                    <span>${remaining} Remaining</span>
                </div>

                <!-- Speaker Card -->
                <div class="bg-white rounded-xl shadow-2xl overflow-hidden border border-slate-200">
                    <div class="p-1 h-2 bg-slate-900"></div>
                    
                    <div class="p-8 md:p-12">
                        <div class="flex flex-col md:flex-row gap-8 items-start">
                            
                            <!-- Portrait / Info Area -->
                            <div class="flex-shrink-0 text-center md:w-1/3 w-full">
                                <div class="w-32 h-32 bg-slate-200 rounded-full mx-auto mb-4 flex items-center justify-center border-4 border-slate-100 shadow-inner">
                                    <i data-lucide="user" class="w-16 h-16 text-slate-400"></i>
                                </div>
                                <h2 class="text-2xl font-serif font-bold text-slate-900">${speaker.name}</h2>
                                <p class="text-slate-500 font-medium mb-6">${speaker.role}</p>
                                
                                <div>
                                    <a href="${speaker.link}" target="_blank" rel="noreferrer" class="text-amber-700 hover:text-amber-900 text-sm underline flex items-center justify-center gap-1">
                                        <i data-lucide="book-open" class="w-3 h-3"></i> Historical Bio
                                    </a>
                                </div>
                            </div>

                            <!-- Speech Area -->
                            <div class="flex-grow md:w-2/3">
                                <div class="relative">
                                    <i data-lucide="scroll" class="absolute -top-6 -left-4 w-12 h-12 text-amber-200 opacity-50"></i>
                                    <blockquote class="text-xl md:text-2xl font-serif leading-relaxed text-slate-800 italic relative z-10">
                                        "${speaker.quote}"
                                    </blockquote>
                                    <p class="text-right mt-4 text-slate-400 text-sm font-sans">— ${speaker.source}</p>
                                </div>

                                <div class="mt-12">
                                    <p class="text-center text-sm font-bold text-slate-400 uppercase tracking-widest mb-4">How convincing is this argument?</p>
                                    
                                    <!-- Interaction Buttons -->
                                    <div class="grid grid-cols-1 md:grid-cols-5 gap-2">
                                        <button onclick="handleVote(10)" class="bg-green-700 hover:bg-green-800 text-white p-3 rounded-md shadow transition-colors flex flex-col items-center justify-center gap-1 group">
                                            <i data-lucide="thumbs-up" class="w-5 h-5 mb-1 group-hover:scale-110 transition-transform"></i>
                                            <span class="text-xs font-bold">Very Convincing</span>
                                        </button>
                                        
                                        <button onclick="handleVote(5)" class="bg-green-600 hover:bg-green-700 text-white p-3 rounded-md shadow transition-colors flex flex-col items-center justify-center gap-1">
                                            <span class="text-xs font-bold">Convincing</span>
                                        </button>

                                        <button onclick="handleVote(0)" class="bg-slate-400 hover:bg-slate-500 text-white p-3 rounded-md shadow transition-colors flex flex-col items-center justify-center gap-1">
                                            <i data-lucide="minus" class="w-5 h-5 mb-1"></i>
                                            <span class="text-xs font-bold">Neutral</span>
                                        </button>

                                        <button onclick="handleVote(-5)" class="bg-orange-600 hover:bg-orange-700 text-white p-3 rounded-md shadow transition-colors flex flex-col items-center justify-center gap-1">
                                            <span class="text-xs font-bold">Unconvincing</span>
                                        </button>

                                        <button onclick="handleVote(-10)" class="bg-red-700 hover:bg-red-800 text-white p-3 rounded-md shadow transition-colors flex flex-col items-center justify-center gap-1 group">
                                            <i data-lucide="thumbs-down" class="w-5 h-5 mb-1 group-hover:scale-110 transition-transform"></i>
                                            <span class="text-xs font-bold">Strong Disagree</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            `;
        }

        function renderConclusion() {
            let leaning = 'Neutral';
            if (state.meterValue > 10) leaning = 'Strongly Annexationist';
            else if (state.meterValue > 0) leaning = 'Leaning Annexationist';
            else if (state.meterValue === 0) leaning = 'Neutral';
            else if (state.meterValue > -10) leaning = 'Leaning Independent';
            else leaning = 'Strongly Independent';

            const scoreColor = state.meterValue > 0 ? 'text-blue-600' : 'text-red-600';
            const sign = state.meterValue > 0 ? '+' : '';

            // Button Styles
            const annexClass = state.finalVote === 'annex' 
                ? 'border-blue-600 bg-blue-50 text-blue-900' 
                : 'border-slate-200 hover:border-blue-300 text-slate-500';
            
            const indepClass = state.finalVote === 'independence' 
                ? 'border-red-600 bg-red-50 text-red-900' 
                : 'border-slate-200 hover:border-red-300 text-slate-500';

            const submitDisabled = !state.justification.trim() || !state.finalVote;

            return `
            <div class="animate-fade-in space-y-8">
                <div class="bg-white p-8 md:p-12 rounded-xl shadow-2xl text-center max-w-3xl mx-auto border-t-8 border-slate-900">
                    <h2 class="text-3xl font-serif font-bold text-slate-900 mb-6">The Debate Has Concluded</h2>
                    
                    <div class="bg-slate-50 p-6 rounded-lg mb-8 border border-slate-200">
                        <p class="text-slate-500 uppercase tracking-widest text-xs font-bold mb-2">Your Final Leaning</p>
                        <div class="text-4xl font-bold mb-2 text-slate-900">${leaning}</div>
                        <p class="text-slate-600">
                            Your attitude score: <span class="font-bold ${scoreColor}">${sign}${state.meterValue}</span>
                        </p>
                    </div>

                    <h3 class="text-xl font-bold text-slate-800 mb-4">Cast Your Vote</h3>
                    <p class="mb-6 text-slate-600">Considering all arguments, how should the United States proceed with the Philippines?</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                        <button onclick="setFinalVote('annex')" class="p-6 rounded-lg border-4 transition-all ${annexClass}">
                            <div class="text-2xl font-serif font-bold mb-2">Annexation</div>
                            <div class="text-sm opacity-80">The Philippines become a U.S. Territory</div>
                        </button>

                        <button onclick="setFinalVote('independence')" class="p-6 rounded-lg border-4 transition-all ${indepClass}">
                            <div class="text-2xl font-serif font-bold mb-2">Independence</div>
                            <div class="text-sm opacity-80">The Philippines become a sovereign nation</div>
                        </button>
                    </div>

                    <div id="justification-section" class="${state.finalVote ? 'block animate-fade-in' : 'hidden'} text-left">
                        <label class="block text-slate-700 font-bold mb-2">Justify your vote (Required):</label>
                        <textarea
                            id="justification-input"
                            oninput="updateJustification(this.value)"
                            class="w-full p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 outline-none min-h-[150px] mb-6 font-serif"
                            placeholder="Why did you choose this path? Which arguments influenced you the most?"
                        >${state.justification}</textarea>

                        <button
                            onclick="submitFinalVote()"
                            ${submitDisabled ? 'disabled' : ''}
                            class="w-full bg-slate-900 disabled:bg-slate-400 text-white font-bold text-lg py-4 px-6 rounded-lg shadow-lg hover:bg-slate-800 transition-colors flex items-center justify-center gap-2"
                        >
                            <i data-lucide="send" class="w-5 h-5"></i> Submit to lobanm@cvcolonials.org
                        </button>
                        <p class="text-center text-xs text-slate-400 mt-2">
                            This will open your email client to send your response.
                        </p>
                    </div>
                </div>

                <button onclick="resetApp()" class="flex items-center gap-2 mx-auto text-slate-500 hover:text-slate-800 transition-colors">
                    <i data-lucide="rotate-ccw" class="w-4 h-4"></i> Restart Forum
                </button>
            </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            updateMeter();
            
            if (state.step === 'intro') {
                app.innerHTML = renderIntro();
            } else if (state.step === 'forum') {
                app.innerHTML = renderForum();
            } else if (state.step === 'conclusion') {
                app.innerHTML = renderConclusion();
            }
            
            // Re-initialize icons after DOM update
            lucide.createIcons();
        }

        // --- ACTIONS ---

        function startForum() {
            state.step = 'forum';
            render();
        }

        function handleVote(weight) {
            const speaker = DEBATE_DATA[state.currentSpeakerIndex];
            let scoreChange = 0;

            // Imperialist: Agree (+), Disagree (-)
            // Anti-Imperialist: Agree (-), Disagree (+)
            if (speaker.stance === 'imperialist') {
                scoreChange = weight;
            } else {
                scoreChange = -weight;
            }

            // Update meter (-50 to 50)
            state.meterValue = Math.max(-50, Math.min(50, state.meterValue + scoreChange));

            // Move to next speaker or finish
            if (state.currentSpeakerIndex < DEBATE_DATA.length - 1) {
                state.currentSpeakerIndex++;
                render();
            } else {
                state.step = 'conclusion';
                render();
            }
        }

        function setFinalVote(choice) {
            state.finalVote = choice;
            render();
        }

        function updateJustification(value) {
            state.justification = value;
            const btn = document.querySelector('button[onclick="submitFinalVote()"]');
            if (value.trim().length > 0 && state.finalVote) {
                btn.removeAttribute('disabled');
            } else {
                btn.setAttribute('disabled', 'true');
            }
        }

        function submitFinalVote() {
            const subject = encodeURIComponent("Vote on Philippines Annexation");
            const body = encodeURIComponent(
`My Vote: ${state.finalVote === 'annex' ? 'ANNEX THE PHILIPPINES' : 'GRANT INDEPENDENCE'}

Justification:
${state.justification}

---
Attitude Meter Score: ${state.meterValue} (Scale: -50 Independence to +50 Annexation)
Completed on: ${new Date().toLocaleDateString()}`
            );
            
            window.location.href = `mailto:lobanm@cvcolonials.org?subject=${subject}&body=${body}`;
        }

        function resetApp() {
            state = {
                step: 'intro',
                currentSpeakerIndex: 0,
                meterValue: 0,
                finalVote: null,
                justification: ''
            };
            render();
        }

        // --- INIT ---
        render();

    </script>
</body>
</html>
